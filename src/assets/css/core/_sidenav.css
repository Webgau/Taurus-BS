/**
 * ==========================================================================
 * SIDENAV MENU STYLES
 * ==========================================================================
 *
 * Navigation menu component for the sidebar with the following features:
 * - Multi-level submenu support (up to 3 levels)
 * - Collapsible/expandable submenus with animations
 * - Minified mode (icon-only, 60px width)
 * - Mobile drawer with slide-in animation
 * - Light/Dark theme support via CSS variables
 *
 * Table of Contents:
 * 1. CSS Variables - Light Mode
 * 2. CSS Variables - Dark Mode
 * 3. Menu Header
 * 4. Menu Items & Links
 * 5. Menu Icons
 * 6. Menu Badges & Labels
 * 7. Menu Caret (Submenu Indicator)
 * 8. Active State
 * 9. Submenu Styles
 * 10. Submenu Grid Lines
 * 11. Minify Button
 * 12. Minified Sidebar State
 * 13. Mobile Sidebar
 */


/* ==========================================================================
   1. CSS VARIABLES - LIGHT MODE
   ========================================================================== */

:root,
[data-bs-theme="light"] {
    /* Header */
    --sidenav-menu-header-color: #adb5bd;

    /* Links */
    --sidenav-menu-link-color: #6c757d;
    --sidenav-menu-link-hover-color: #20252a;
    --sidenav-menu-link-font-weight: 600;

    /* Icons */
    --sidenav-menu-icon-color: #495057;

    /* Badges */
    --sidenav-menu-badge-bg: #dee2e6;
    --sidenav-menu-badge-color: #2d353c;
    --sidenav-menu-badge-font-weight: 700;

    /* Active State */
    --sidenav-menu-active-bg: #f0f2f4;
    --sidenav-menu-active-color: #20252a;

    /* Submenu */
    --sidenav-menu-submenu-bg: none;
    --sidenav-menu-submenu-link-color: #6c757d;
    --sidenav-menu-submenu-link-hover-color: #20252a;
    --sidenav-menu-submenu-link-font-weight: 600;

    /* Submenu Grid Lines */
    --sidenav-menu-grid-bg: #dee2e6;
    --sidenav-menu-grid-border-width: 2px;
    --sidenav-menu-grid-border-color: #dee2e6;

    /* Minify Button */
    --sidenav-minify-btn-bg: #e9ecef;
    --sidenav-minify-btn-hover-bg: #ced4da;
}


/* ==========================================================================
   2. CSS VARIABLES - DARK MODE
   ========================================================================== */

[data-bs-theme="dark"] {
    /* Header */
    --sidenav-menu-header-color: rgba(255, 255, 255, 0.55);

    /* Links */
    --sidenav-menu-link-color: rgba(255, 255, 255, 0.65);
    --sidenav-menu-link-hover-color: #fff;
    --sidenav-menu-link-font-weight: 400;

    /* Icons */
    --sidenav-menu-icon-color: rgba(255, 255, 255, 0.85);

    /* Badges */
    --sidenav-menu-badge-bg: rgba(255, 255, 255, 0.1);
    --sidenav-menu-badge-color: #fff;
    --sidenav-menu-badge-font-weight: 400;

    /* Active State */
    --sidenav-menu-active-bg: rgba(0, 0, 0, 0.25);
    --sidenav-menu-active-color: #fff;

    /* Submenu */
    --sidenav-menu-submenu-bg: none;
    --sidenav-menu-submenu-link-color: rgba(255, 255, 255, 0.45);
    --sidenav-menu-submenu-link-hover-color: #fff;
    --sidenav-menu-submenu-link-font-weight: 400;

    /* Submenu Grid Lines */
    --sidenav-menu-grid-bg: rgba(0, 0, 0, 0.25);
    --sidenav-menu-grid-border-width: 1px;
    --sidenav-menu-grid-border-color: rgba(255, 255, 255, 0.6);

    /* Minify Button */
    --sidenav-minify-btn-bg: rgba(0, 0, 0, 0.25);
    --sidenav-minify-btn-hover-bg: rgba(0, 0, 0, 0.35);
}


/* ==========================================================================
   3. MENU HEADER
   Section dividers with centered text and gradient lines
   ========================================================================== */

.layout-sidebar .menu .menu-header {
    align-items: center;
    color: var(--sidenav-menu-header-color);
    display: flex;
    font-size: 11px;
    font-weight: 600;
    gap: 12px;
    letter-spacing: 0.5px;
    line-height: 20px;
    margin: 0;
    padding: 15px 20px 8px;
    text-transform: uppercase;
}

/* Gradient lines on both sides of header text */
.layout-sidebar .menu .menu-header::before,
.layout-sidebar .menu .menu-header::after {
    content: "";
    flex: 1;
    height: 1px;
}

.layout-sidebar .menu .menu-header::before {
    background: linear-gradient(to right, transparent, var(--sidenav-menu-header-color));
}

.layout-sidebar .menu .menu-header::after {
    background: linear-gradient(to right, var(--sidenav-menu-header-color), transparent);
}


/* ==========================================================================
   4. MENU ITEMS & LINKS
   ========================================================================== */

.layout-sidebar .menu .menu-item {
    position: relative;
}

.layout-sidebar .menu .menu-item .menu-link {
    align-items: center;
    color: var(--sidenav-menu-link-color);
    display: flex;
    font-weight: var(--sidenav-menu-link-font-weight);
    line-height: 20px;
    padding: 10px 20px;
    text-decoration: none;
    transition: color 0.15s ease;
}

.layout-sidebar .menu .menu-item .menu-link .menu-text {
    flex: 1;
}

/* Hover & Focus States */
.layout-sidebar .menu .menu-item .menu-link:hover,
.layout-sidebar .menu .menu-item .menu-link:focus {
    background: transparent;
    color: var(--sidenav-menu-link-hover-color);
}


/* ==========================================================================
   5. MENU ICONS
   ========================================================================== */

.layout-sidebar .menu .menu-item .menu-icon {
    align-items: center;
    color: var(--sidenav-menu-icon-color);
    display: flex;
    font-size: 1rem;
    height: 20px;
    justify-content: center;
    margin-right: 12px;
    width: 20px;
}

.layout-sidebar .menu .menu-item .menu-icon img {
    max-height: 100%;
    max-width: 100%;
}


/* ==========================================================================
   6. MENU BADGES & LABELS
   ========================================================================== */

/* Badge - Rounded pill style (e.g., "New") */
.layout-sidebar .menu .menu-item .menu-link .menu-badge {
    background: var(--sidenav-menu-badge-bg);
    border-radius: 12px;
    color: var(--sidenav-menu-badge-color);
    font-size: 10px;
    font-weight: var(--sidenav-menu-badge-font-weight);
    line-height: 1.6;
    padding: 0 0.75em;
}

/* Label - Primary colored tag */
.layout-sidebar .menu .menu-item .menu-link .menu-label {
    background-color: var(--bs-primary);
    border-radius: 4px;
    color: #fff;
    font-size: 75%;
    font-weight: 600;
    margin-left: 5px;
    padding: 0.25em 0.5em;
    text-align: center;
    white-space: nowrap;
}


/* ==========================================================================
   7. MENU CARET (SUBMENU INDICATOR)
   Chevron icon that rotates when submenu is expanded
   ========================================================================== */

.layout-sidebar .menu .menu-caret {
    border: none;
    display: block;
    font-size: 0.6875rem;
    margin-left: auto;
    text-align: center;
    transition: transform 0.2s linear;
    width: 20px;
}

.layout-sidebar .menu .menu-caret::before {
    content: "\F285"; /* Bootstrap Icon: bi-chevron-right */
    display: block;
    font-family: "bootstrap-icons";
    opacity: 0.5;
    text-align: center;
}

/* Rotated state when submenu is open */
.layout-sidebar .menu .active:not(.closed):not(.closing) > a .menu-caret::before,
.layout-sidebar .menu .expand > a .menu-caret::before,
.layout-sidebar .menu .expanding > a .menu-caret::before {
    opacity: 1;
    transform: rotate(90deg);
}


/* ==========================================================================
   8. ACTIVE STATE
   Highlighted state for current page
   ========================================================================== */

.layout-sidebar .menu .menu-item.active > .menu-link {
    background-color: var(--sidenav-menu-active-bg);
    color: var(--sidenav-menu-active-color);
    position: relative;
    z-index: 10;
}

.layout-sidebar .menu .menu-item.active > .menu-link .menu-icon {
    color: var(--bs-body-color);
}


/* ==========================================================================
   9. SUBMENU STYLES
   ========================================================================== */

.layout-sidebar .menu .menu-item .menu-submenu {
    background: var(--sidenav-menu-submenu-bg);
    display: none;
    list-style: none;
    margin: 0;
    padding: 5px 0 10px 42px;
    position: relative;
}

/* Submenu Links */
.layout-sidebar .menu .menu-item .menu-submenu .menu-item .menu-link {
    color: var(--sidenav-menu-submenu-link-color);
    font-weight: var(--sidenav-menu-submenu-link-font-weight);
    line-height: 18px;
    padding: 3px 20px 10px 15px;
    position: relative;
    text-decoration: none;
}

.layout-sidebar .menu .menu-item .menu-submenu .menu-item .menu-link:hover,
.layout-sidebar .menu .menu-item .menu-submenu .menu-item .menu-link:focus {
    background: transparent;
    color: var(--sidenav-menu-submenu-link-hover-color);
}

/* Active Submenu Item */
.layout-sidebar .menu .menu-item .menu-submenu .menu-item.active > .menu-link {
    background: transparent;
    color: var(--sidenav-menu-active-color);
}

.layout-sidebar .menu .menu-item .menu-submenu .menu-item.active::after {
    background: var(--sidenav-menu-active-color);
    border-color: var(--sidenav-menu-grid-border-color);
}

/* Hover state for bullet point marker */
.layout-sidebar .menu .menu-item .menu-submenu .menu-item:hover::after {
    border-color: var(--sidenav-menu-submenu-link-hover-color);
}

/* Nested Submenu (3rd level) */
.layout-sidebar .menu .menu-item .menu-submenu .menu-item .menu-submenu {
    background: transparent;
    padding: 0 0 0 15px;
}

/* Show submenu when parent is active */
.layout-sidebar .menu .menu-item.active.has-sub > .menu-submenu {
    display: block;
}


/* ==========================================================================
   10. SUBMENU GRID LINES
   Visual tree-like connector lines for submenu items
   ========================================================================== */

/* Horizontal connector line */
.layout-sidebar .menu .menu-item .menu-submenu .menu-item .menu-link::after {
    background: var(--sidenav-menu-grid-bg);
    content: "";
    height: 2px;
    left: -11px;
    position: absolute;
    top: 11px;
    width: 11px;
}

/* Vertical connector line */
.layout-sidebar .menu .menu-item .menu-submenu .menu-item::before {
    background: var(--sidenav-menu-grid-bg);
    bottom: 0;
    content: "";
    left: -13px;
    position: absolute;
    top: 0;
    width: 2px;
}

/* Bullet point marker */
.layout-sidebar .menu .menu-item .menu-submenu .menu-item::after {
    background: var(--bs-tertiary-bg);
    border: var(--sidenav-menu-grid-border-width) solid var(--sidenav-menu-grid-border-color);
    border-radius: 4px;
    content: "";
    height: 6px;
    left: 0;
    margin-top: -2px;
    position: absolute;
    top: 11px;
    width: 6px;
    z-index: 10;
}

/* Grid line adjustments for first/last items */
.layout-sidebar .menu .menu-item .menu-submenu .menu-item:first-child::before {
    top: -14px;
}

.layout-sidebar .menu .menu-item .menu-submenu .menu-item:first-child:last-child::before {
    height: 27px;
}

.layout-sidebar .menu .menu-item .menu-submenu .menu-item:last-child::before {
    bottom: auto;
    height: 13px;
}


/* ==========================================================================
   11. MINIFY BUTTON
   Toggle button to collapse sidebar to icon-only mode
   ========================================================================== */

.layout-sidebar .sidebar-minify-btn {
    align-items: center;
    background: var(--sidenav-minify-btn-bg);
    border: none;
    border-radius: 20px 0 0 20px;
    color: var(--bs-body-color);
    cursor: pointer;
    display: flex;
    margin: 10px 0;
    padding: 5px 20px 5px 10px !important;
    text-decoration: none;
}

.layout-sidebar .sidebar-minify-btn i {
    margin: 0 !important;
    transition: transform 0.2s ease;
}

.layout-sidebar .sidebar-minify-btn:hover,
.layout-sidebar .sidebar-minify-btn:focus {
    background: var(--sidenav-minify-btn-hover-bg);
}


/* ==========================================================================
   12. MINIFIED SIDEBAR STATE
   Collapsed sidebar showing only icons (60px width)
   ========================================================================== */

.app-sidebar-minified .layout-sidebar {
    width: 60px !important;
}

.app-sidebar-minified .layout-sidebar .menu > .menu-item > .menu-link {
    justify-content: center;
    padding: 10px 20px;
}

/* Hide text elements in minified mode */
.app-sidebar-minified .layout-sidebar .menu > .menu-item > .menu-link .menu-text,
.app-sidebar-minified .layout-sidebar .menu > .menu-item > .menu-link .menu-badge,
.app-sidebar-minified .layout-sidebar .menu > .menu-item > .menu-link .menu-label {
    display: none;
}

.app-sidebar-minified .layout-sidebar .menu > .menu-item > .menu-link .menu-icon {
    margin: 0;
}

/* Hide submenus, headers, and cover in minified mode */
.app-sidebar-minified .layout-sidebar .menu > .menu-item.has-sub > .menu-submenu {
    display: none !important;
}

.app-sidebar-minified .layout-sidebar .menu-header,
.app-sidebar-minified .layout-sidebar .sidebar-cover {
    display: none !important;
}

/* Caret adjustments for minified mode */
.app-sidebar-minified .layout-sidebar .menu-caret {
    margin-right: -15px;
}

.app-sidebar-minified .layout-sidebar .menu-caret::before {
    transform: rotate(0) !important;
}

/* Rotate minify button icon when minified */
.app-sidebar-minified .layout-sidebar .sidebar-minify-btn i {
    transform: rotate(180deg);
}

/* Adjust main content margin when sidebar is minified */
@media (min-width: 992px) {
    .app-sidebar-minified .layout-main {
        margin-left: calc(60px - var(--layout-sidebar-width));
    }
}


/* ==========================================================================
   13. MOBILE SIDEBAR
   Off-canvas drawer with slide-in animation for mobile devices
   ========================================================================== */

/* Slide-in Animations */
@keyframes sidebarMobileSlideIn {
    from { transform: translateX(-100%); }
    to   { transform: translateX(0); }
}

@keyframes sidebarMobileSlideOut {
    from { transform: translateX(0); }
    to   { transform: translateX(-100%); }
}

@keyframes sidebarMobileBackdrop {
    from { opacity: 0; }
    to   { opacity: 1; }
}

@keyframes sidebarMobileBackdropOut {
    from { opacity: 1; }
    to   { opacity: 0; }
}

/* Backdrop overlay */
.sidebar-mobile-backdrop {
    background: rgba(0, 0, 0, 0.5);
    border: 0;
    bottom: 0;
    display: none;
    height: 100%;
    left: 0;
    margin: 0;
    outline: 0;
    padding: 0;
    position: fixed;
    right: 0;
    top: 0;
    width: 100%;
    z-index: 1019;
}

.sidebar-mobile-backdrop a {
    display: block;
    height: 100%;
    width: 100%;
}

/* Mobile-specific styles */
@media (max-width: 991.98px) {
    .layout-sidebar {
        height: 100vh !important;
        position: fixed !important;
        top: 0 !important;
        transform: translateX(-100%);
        z-index: 1021;
    }

    /* Sidebar open state */
    .app-sidebar-mobile-toggled .layout-sidebar {
        animation: sidebarMobileSlideIn 0.2s ease;
        transform: translateX(0);
    }

    .app-sidebar-mobile-toggled .sidebar-mobile-backdrop {
        animation: sidebarMobileBackdrop 0.2s ease;
        display: block;
    }

    /* Sidebar closing state */
    .app-sidebar-mobile-closed .layout-sidebar {
        animation: sidebarMobileSlideOut 0.2s ease;
        transform: translateX(-100%);
    }

    .app-sidebar-mobile-closed .sidebar-mobile-backdrop {
        animation: sidebarMobileBackdropOut 0.2s ease;
        display: block;
        opacity: 0;
    }
}
